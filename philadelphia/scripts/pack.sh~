#!/bin/bash

# Define the target directory for collecting files
target_dir="collected_assets_$(date +%Y%m%d_%H%M%S)"
mkdir -p "$target_dir"

# Copy the specified files and directories into the target directory
find models -regex "models/[0-9]*model.json" -exec cp {} "$target_dir/" \;
cp config.yaml "$target_dir/"
cp models/sim.csv "$target_dir/"
cp models/modelprop.csv "$target_dir/"

# Create a README.md file with the current date
echo "Collected assets on $(date '+%Y-%m-%d %H:%M:%S')" > "$target_dir/README.md"

# Tar the directory and remove the original
tar -czf "${target_dir}.tar.gz" "$target_dir"
rm -rf "$target_dir"

echo "Assets collected and compressed into ${target_dir}.tar.gz"
